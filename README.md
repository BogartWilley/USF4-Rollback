# sf4e

A process-inspection and modification tool for the Steam release of _Ultra Street Fighter 4_.

## Table of contents
  * [Building](#building)
  * [Contributing](#contributing)
  * [Authors](#authors)
  * [License](#license)
  * [External Licenses and Copyright Information](#external-licenses-and-copyright-information)

## Building

sf4e uses [CMake](https://cmake.org/) as a build engine. This is
completely irrelevant to users, but developers will need an installation
of CMake, or IDE support for CMake, like Visual Studio.

### Build requirements

* [CMake](https://cmake.org/)
* [Visual Studio](https://visualstudio.microsoft.com/) 2017 or later with Visual C++

To manually build and run sf4e:
1. Clone the following dependencies, which are built from source:
   * Microsoft's [Detours](https://github.com/microsoft/Detours). Detours
     is used to install custom netplay hooks at runtime.
   * [ValveFileVDF](https://github.com/TinyTinni/ValveFileVDF). ValveFileVDF
     is used to parse Steam's configuration files, to automatically detect
     your installation of SF4.
   * [Dear Imgui](https://github.com/ocornut/imgui). Dear Imgui is used to
     provide custom overlays for new features and non-durable,
     development-time debugging.
   * [spdlog](https://github.com/gabime/spdlog). spdlog is used to provide
     durable file logging, both at development time and in release builds.
2. Build Detours using x86-compatible build tools.
   * USF4 is natively compiled for 32-bit x86, and using an entire 32-bit
     toolchain prevents us from needing to handle cross compilation.
   * Detours is large enough that it benefits from precompilation-
     you won't need to precompile ValveFileVDF and Dear Imgui.
3. Use Visual Studio (or your preferred CMake generator) to generate a new
   CMake cache. Remember to update your CMake directories:
   * The `DETOURS_DIR` Cmake variable should point at your Detours build output
   * The `VALVEFILEVDF_DIR` CMake variable should point at your ValveFileVDF checkout.
   * The `DEARIMGUI_DIR` CMake variable should point at your Dear Imgui checkout.
   * The `spdlog_DIR` CMake variable should point into a built and installed
     `spdlog` directory, in `$CMAKE_BUILD_ROOT\lib\cmake\spdlog`, and be built
     in debug mode or release mode, matching sf4e. The directory
     should contain a file named `spdlogConfig.cmake`. It must be built with
     `SPDLOG_WCHAR_FILENAMES` set on.

4. Build the launcher using the makefile or project generated by CMake.
5. Confirm that `Launcher.exe` and `Sidecar.dll` are in the build output.
6. Run `Launcher.exe`.

## License

This project is licensed under the MIT License - see the LICENSE.md file for details.

## External Licenses and Copyright Information

Street Fighter, Street Fighter 4, Ultra Street Fighter 4, and all related software
Copyright © CAPCOM.

Steam
Copyright © Valve Corporation.

Detours
Copyright © Microsoft Corporation.

ValveFileVDF
Copyright © Matthias Möller.

CMake - Cross Platform Makefile Generator
Copyright © Kitware, Inc. and Contributors.

Dear Imgui
Copyright © Omar Cornut
